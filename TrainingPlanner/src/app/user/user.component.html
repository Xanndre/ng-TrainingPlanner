<div class="row" *ngIf="isLoaded">
  <div class="col-lg-3"></div>
  <div class="col-lg-6">
    <form
      class="text-center p-5"
      [formGroup]="userForm.userForm"
      (ngSubmit)="editUserData()"
    >
      <input
        type="file"
        id="file"
        accept="image/*"
        [disabled]="isReadOnly"
        (change)="changePictureListener($event)"
      />

      <img
        class="tp-image"
        src="{{
          user.profilePicture != null
            ? user.profilePicture
            : 'https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png'
        }}"
        alt="Profile Picture"
      />
      <button
        class="btn btn-danger"
        *ngIf="user.profilePicture != null && isEdited"
        (click)="user.profilePicture = null"
      >
        Delete picture
      </button>

      <app-custom-control-group
        *ngFor="let controlGroup of formControls.controlGroups"
        [customControlGroup]="controlGroup"
        [readonly]="!isEdited"
      ></app-custom-control-group>
      <div class="row">
        <div class="col">
          <mat-form-field>
            <input
              matInput
              [disabled]="isReadOnly"
              [matDatepicker]="birthDate"
              placeholder="Birth date"
              [(ngModel)]="user.birthDate"
              [ngModelOptions]="{ standalone: true }"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="birthDate"
            ></mat-datepicker-toggle>
            <mat-datepicker #birthDate startView="multi-year"></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="col">
          <mat-form-field>
            <mat-label>Gender</mat-label>
            <mat-select
              [disabled]="isReadOnly"
              [(ngModel)]="user.gender"
              [ngModelOptions]="{ standalone: true }"
            >
              <mat-option value="Female">Female</mat-option>
              <mat-option value="Male">Male</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <button
        *ngIf="!isEdited"
        class="btn btn-success btn-block my-4"
        type="submit"
      >
        Edit
      </button>
      <div *ngIf="isEdited" class="row">
        <div class="col">
          <button
            class="btn btn-success btn-block my-4"
            type="submit"
            [disabled]="!userForm.userForm.valid"
            (click)="saveUserData()"
          >
            Save
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-secondary btn-block my-4"
            type="submit"
            (click)="cancel()"
          >
            Close
          </button>
        </div>
      </div>
    </form>
  </div>
  <div class="col-lg-3"></div>
</div>
